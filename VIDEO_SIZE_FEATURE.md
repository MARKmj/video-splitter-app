# 📐 视频尺寸标准化功能说明

## ✨ 新功能概述

视频分段工具现在支持**尺寸标准化/截取**功能！你可以将视频统一处理为常见的标准尺寸，包括横屏、竖屏和正方形格式。

## 🎯 功能特点

### 📏 支持 10 种尺寸选项

#### 🖥️ 原尺寸（默认）
- **保持不变**：不调整视频尺寸
- **处理速度**：最快（使用 copy 模式，无重编码）
- **视频质量**：无损
- **适用场景**：快速分割，不需要调整尺寸

#### 📺 横屏 (Landscape)
1. **16:9 (1920x1080)** - Full HD
   - 最常见的宽屏格式
   - 适合 YouTube、电脑观看

2. **16:9 (1280x720)** - HD
   - 较小的 Full HD 格式
   - 平衡质量和文件大小

3. **4:3 (1440x1080)** - 传统
   - 传统电视格式
   - 适合老式显示器

4. **21:9 (2560x1080)** - 超宽
   - 电影级宽屏
   - 适合影院体验

#### 📱 竖屏 (Portrait)
1. **9:16 (1080x1920)** - 短视频
   - 抖音、快手、YouTube Shorts
   - 最主流的竖屏格式

2. **9:16 (720x1280)** - 移动端
   - 较小的竖屏格式
   - 适合移动设备

3. **4:5 (1080x1350)** - Instagram
   - Instagram 常用格式
   - 适合社交媒体

#### ⬜ 正方形 (Square)
1. **1:1 (1080x1080)** - 标准
   - Instagram、LinkedIn
   - 社交媒体经典格式

2. **1:1 (720x720)** - 小尺寸
   - 较小的正方形格式
   - 文件更小

## 🎨 UI 界面

### 位置
配置选项 → "视频尺寸"（位于"音频选项"之后）

### 控件类型
**网格按钮组** - 直观易用
- 自动响应式布局
- 清晰的尺寸信息显示
- 实时状态反馈

### 按钮信息
每个按钮显示：
- **比例**：如 "16:9"、"9:16"
- **分辨率**：如 "1920x1080"、"1080x1920"
- **描述**：如 "Full HD"、"短视频"

### 状态指示
- **未选中**：灰色边框，白色背景
- **选中**：紫色边框，渐变背景，阴影效果
- **悬停**：边框变色，轻微上移

## 🔧 技术实现

### FFmpeg 处理策略

#### 原尺寸（快速模式）
```bash
ffmpeg -i input.mp4 \
  -c copy \
  -f segment \
  -segment_time 60 \
  output_%02d.mp4
```
- 使用 `-c copy`：无重编码
- 处理速度：最快
- 视频质量：无损失

#### 指定尺寸（重编码模式）
```bash
ffmpeg -i input.mp4 \
  -vf "scale=1920:1080:force_original_aspect_ratio=decrease,crop=1920:1080" \
  -c:v libx264 \
  -preset fast \
  -crf 23 \
  -f segment \
  -segment_time 60 \
  output_%02d.mp4
```
- **scale** 滤镜：保持纵横比缩放
- **crop** 滤镜：居中裁剪到目标尺寸
- **libx264**：H.264 编码
- **preset fast**：快速编码预设
- **crf 23**：质量控制（23 是很好的平衡点）

### 智能裁剪算法

1. **第一步：缩放**
   - 使用 `force_original_aspect_ratio=decrease`
   - 视频缩小到完全适应目标尺寸
   - 保持原始纵横比
   - 不会变形或拉伸

2. **第二步：裁剪**
   - 居中裁剪到目标尺寸
   - 移除多余边缘
   - 保持主要内容

### 性能对比

| 选项 | 编码方式 | 速度 | 质量 | 文件大小 |
|------|---------|------|------|----------|
| 原尺寸 | copy | 最快（1x） | 无损 | 不变 |
| 指定尺寸 | libx264 | 较快（3-5x） | 轻微损失 | 可能变化 |

## 📝 使用指南

### 基本步骤

1. **选择视频尺寸**
   - 点击对应尺寸按钮
   - 查看选中状态（紫色边框）

2. **设置其他选项**
   - 分段时长
   - 音频选项（保留/消除）

3. **开始处理**
   - 选择视频文件
   - 点击"开始分段"

### 使用场景推荐

#### 场景 1：制作抖音/快手视频
```
输入：任意尺寸视频
设置：9:16 (1080x1920)
输出：标准短视频格式
```

#### 场景 2：YouTube 内容创作
```
输入：不同来源的视频素材
设置：16:9 (1920x1080)
输出：统一 Full HD 格式
```

#### 场景 3：Instagram 帖子
```
输入：手机拍摄的竖屏视频
设置：1:1 (1080x1080)
输出：正方形格式
```

#### 场景 4：快速分割（不需要调整尺寸）
```
输入：已标准化的视频
设置：原尺寸
输出：保持原有质量快速分割
```

## ⚠️ 重要提示

### 性能注意事项

1. **处理时间**
   - 原尺寸：最快，几乎无额外时间
   - 指定尺寸：需要 3-5 倍处理时间

2. **文件大小**
   - 指定尺寸可能改变文件大小
   - 放大：文件变大
   - 缩小：文件变小

3. **质量损失**
   - 原尺寸：无损失
   - 指定尺寸：轻微损失（CRF 23，肉眼难辨）

### 最佳实践

1. **优先使用原尺寸**
   - 如果视频已经是标准尺寸
   - 或不需要统一格式

2. **批量处理建议**
   - 先测试一个视频
   - 确认效果满意后再批量处理

3. **质量要求高**
   - 考虑使用专业视频编辑软件
   - 或调整 FFmpeg 参数（需要修改代码）

## 🔄 与其他功能的配合

### ✅ 完美兼容

- **分段时长**：所有尺寸选项都支持
- **消除声音**：可与任何尺寸组合
- **批量处理**：统一应用尺寸设置

### 📋 处理流程

```
1. 选择输入文件夹
2. 选择输出文件夹
3. 设置分段时长
4. 设置视频尺寸 ← 新增
5. 设置音频选项
6. 选择要处理的视频
7. 点击"开始分段"
8. 查看处理结果
```

## 🎉 快速上手

### 示例 1：制作短视频合集
```
输入：多个横屏视频
设置：
- 分段时长：30秒
- 视频尺寸：9:16 (1080x1920)
- 音频选项：保留声音

输出：标准短视频片段
用途：发布到抖音/快手
```

### 示例 2：统一教学视频格式
```
输入：不同来源的教学视频
设置：
- 分段时长：120秒
- 视频尺寸：16:9 (1920x1080)
- 音频选项：保留声音

输出：统一的 Full HD 格式
用途：在线课程平台
```

### 示例 3：快速处理大量视频
```
输入：已标准化的视频文件
设置：
- 分段时长：60秒
- 视频尺寸：原尺寸（默认）
- 音频选项：根据需要

输出：保持原质量的视频片段
用途：快速归档整理
```

## 📊 尺寸对照表

| 分类 | 比例 | 分辨率 | 描述 | 适用平台 |
|------|------|--------|------|----------|
| 原尺寸 | - | - | 保持不变 | 快速处理 |
| 横屏 | 16:9 | 1920x1080 | Full HD | YouTube |
| 横屏 | 16:9 | 1280x720 | HD | 一般用途 |
| 横屏 | 4:3 | 1440x1080 | 传统 | 老式内容 |
| 横屏 | 21:9 | 2560x1080 | 超宽 | 电影 |
| 竖屏 | 9:16 | 1080x1920 | 短视频 | 抖音/Shorts |
| 竖屏 | 9:16 | 720x1280 | 移动端 | 手机 |
| 竖屏 | 4:5 | 1080x1350 | Instagram | 社交媒体 |
| 正方形 | 1:1 | 1080x1080 | 标准 | Instagram |
| 正方形 | 1:1 | 720x720 | 小尺寸 | 社交媒体 |

## 🚀 立即体验

1. 刷新浏览器或重启 Electron 应用
2. 在配置区域找到"视频尺寸"
3. 选择目标尺寸
4. 开始处理视频

---

**更新时间**：2026-01-27
**版本**：v1.3.0
**功能状态**：✅ 已完成并可用

享受更专业的视频处理体验！🎬📐
